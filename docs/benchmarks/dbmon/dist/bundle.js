const e=[],l=[],t=Object,n=Array,s=n.isArray,r=Map,o=Int32Array,c=queueMicrotask,a=Node.prototype,f=Element.prototype,u=document,i=u.createElement("template"),p=i.content;u.createElement("template").content.firstChild;const d=a.insertBefore,v=a.removeChild,g=a.cloneNode,h=f.setAttribute,m=f.removeAttribute,b=f.addEventListener,y=f.removeEventListener,w=(e,l)=>t.getOwnPropertyDescriptor(e,l),N=w(a,"firstChild").get;w(a,"lastChild").get;const E=w(a,"nextSibling").get;w(a,"previousSibling").get;const q=w(a,"textContent").set;w(a,"nodeType").get;const M=w(f,"innerHTML").set,L=w(f,"className").set,C=w(HTMLElement.prototype,"style").get,F=w(SVGElement.prototype,"style").get,k=t.seal({p:null,n:null,si:0,e:[]}),A=(e,l,t,n,s)=>({f:e,v:l,c:t,p:n,s1:s}),S=()=>{const e=k.e;if(e.length>0){k.e=[];for(let l=0;l<e.length;l++)e[l]()}},T=(e,l,t,n,s,r,o)=>{let c;for(let a=0;a<l.length;a++){const f=l[a],u=7&f,i=f>>9;if(0===u)e=n[i],c=void 0;else{const l=f>>3&63,n=r[l];if(4===u){const l=t[i];null===s?void 0!==n&&(e[l]=n):e[l]!==n&&(e[l]=n)}else{let r;if(null!==s&&(r=s[l]),r!==n)if(1===u)0===i?""!==n&&null!=n&&false!==n?L.call(e,n):""!==r&&null!=r&&false!==r&&L.call(e,""):1===i?""!==n&&null!=n&&false!==n?null==r||""===r||false===r?q.call(e,n):N.call(e).nodeValue=n:null!=r&&""!==r&&false!==r&&q.call(e,""):""!==n&&null!=n&&false!==n?M.call(e,n):""!==r&&null!=r&&false!==r&&q.call(e,"");else if(7===u)n(e);else{const l=t[i];2===u?false!==n&&null!=n?h.call(e,l,n):false!==r&&null!=r&&m.call(e,l):3===u?e[l]=n:5===u?false!==n&&null!=n?(void 0===c&&(c=false===o?C.call(e):F.call(e)),c.setProperty(l,n)):false!==r&&null!=r&&(void 0===c&&(c=false===o?C.call(e):F.call(e)),c.removeProperty(l)):(null!=r&&false!==r&&y.call(e,l,r),null!=n&&false!==n&&b.call(e,l,n))}}}}},x=(e,l,t,n,s)=>{const r=k;for(;;){const o=l[t++];if(1&o&&(s[++r.si]=e),2&o){const n=o>>3;if(n)x(N.call(e),l,t,t+=n,s);else{const l=e;s[++r.si]=e=E.call(e),l.remove()}}if(t===n)return;e=E.call(e)}},I=(e,l,t,s)=>{let r=t.length;const o=n(r),c=A(l,s,o,e,null);for(;r>0;)o[--r]=O(c,t[r]);return c},j=(e,l,t,r)=>{if(!s(t))return Q(l,true),O(e,t);const o=l.c;let c=o,a=o.length,f=t.length;if(f!==a){for(l.c=c=n(f);a>f;){const e=o[--a];null!==e&&Q(e,true)}for(;f>a;)c[--f]=O(l,t[f])}for(;f>0;)c[--f]=H(l,o[f],t[f],r);return l},H=(e,l,t,n)=>{if(null===l)return O(e,t);if(false===t||null==t||""===t)return Q(l,true),null;const s=l.c,r=l.v,o=l.s1,c=l.f,a=127&c;if(l.f=a,l.v=t,16===a){const s=k;return"object"!==typeof t?(r!==t&&(o.nodeValue=t),1024&n&&d.call(s.p,o,s.n),s.n=o,l):(v.call(s.p,o),O(e,t))}if(r===t)return P(l,n),l;if(l.f=a,8===a)return j(e,l,t,n);const f=t.d,u=t.p,i=r.p;if(r.d!==f)return Q(l,true),O(e,t);if(2===a)640&(c|n)||void 0===f.p2||true!==f.p2(i,u)?l.c=H(l,s,o(u),n):null!==s&&P(s,n);else if(1===a){const e=k,t=e.p,r=f.p1,c=r.f,a=r.d,p=r.p,v=r.c,g=o[0];if(1024&n&&(n^=1024,d.call(t,g,e.n)),T(g,p,a,o,i,u,!!(4096&c)),null!==s){e.p=g,e.n=null;let r=0;for(let t=0;t<v.length;t++){const c=v[t],a=3&c,f=c>>2;0===a?s[r]=H(l,s[r++],u[f],n):1===a?e.n=o[f]:(e.p=o[f],e.n=null)}e.p=t}e.n=g}else 4===a?V(l,i,u,n):(i.v!==u.v&&(n|=512),l.c=H(l,s,u.c,n));return l},O=(e,l)=>{if(false!==l&&null!=l){if("object"===typeof l){if(s(l))return I(e,8,l,l);{const t=l.d,s=l.p,r=t.p1,o=7&t.f;if(1===o){const o=k,c=o.p,a=o.n,f=r,u=f.d,i=f.p,p=f.s,v=f.c,g=f.f,h=t.p2(),m=n(63&g);m[0]=h,p.length>0&&(o.si=0,x(N.call(h),p,0,p.length,m)),T(h,i,u,m,null,s,!!(4096&g));const b=A(1,l,null,e,m);if(v.length>0){const e=n(g>>6&63);b.c=e,o.p=h,o.n=null;let l=0;for(let t=0;t<v.length;t++){const n=v[t],r=3&n,c=n>>2;0===r?e[l++]=O(b,s[c]):1===r?o.n=m[c]:(o.p=m[c],o.n=null)}o.p=c}return o.n=h,d.call(c,h,a),b}if(2===o){const t={f:2,v:l,c:null,p:e,s1:null,s2:null},n=r(t);return t.c=O(t,n(s)),t.s1=n,t}if(4===o)return I(e,4,s.v,l);const c=A(64,l,null,e,null);return c.c=O(c,s.c),c}}if(""!==l){const t=k,n=t.n,s=u.createTextNode(l);return t.n=s,d.call(t.p,s,n),A(16,l,null,e,s)}}return null},P=(e,l)=>{const t=k,n=e.s1,s=e.v,r=e.c,o=e.f,c=127&o;if(e.f=c,1===c){const e=n[0];if(1024&l&&(l^=1024,d.call(t.p,e,t.n)),256&o){t.p=e,t.n=null;const o=t.p,c=s.d.p1.c;let a=0;for(let e=0;e<c.length;e++){const s=c[e],o=3&s,f=s>>2;if(0===o){const e=r[a++];null!==e&&P(e,l)}else 1===o?t.n=n[f]:(t.p=n[f],t.n=null)}t.p=o}t.n=e}else if(16===c)1024&l&&d.call(t.p,n,t.n),t.n=n;else if(2===c)640&(o|l)?e.c=H(e,r,n(s.p),l):null!==r&&P(r,l);else if(64===c)null!==r&&P(r,l);else{let e=r.length;for(;--e>=0;){const t=r[e];null!==t&&P(t,l)}}},Q=(e,l)=>{const t=e.f,n=e.c;if(true===l&&17&t&&(l=false,v.call(k.p,1&t?e.s1[0]:e.s1)),2&t){const l=e.s2;if(null!==l)if("function"===typeof l)l();else for(let e=0;e<l.length;e++)l[e]()}if(null!==n)if(s(n))for(let e=0;e<n.length;e++){const t=n[e];null!==t&&Q(t,l)}else Q(n,l)},V=(e,l,t,s)=>{const c=l.k,a=t.k,f=t.v;let u=a.length,i=c.length;const p=n(u);if(0===u)i>0&&Q(e,true);else if(0===i)for(;u>0;)p[--u]=O(e,f[u]);else{const l=e.c;let t=i-1,n=u-1,d=0;e:for(;;){for(;c[t]===a[n];)if(p[n]=H(e,l[t--],f[n],s),d>--n||d>t)break e;for(;c[d]===a[d]&&++d<=t&&d<=n;);break}if(d>t)for(;n>=d;)p[n]=O(e,f[n--]);else if(d>n){u=d;do{const e=l[u++];null!==e&&Q(e,true)}while(u<=t)}else{let u=n-d+1;const i=new o(u),v=new r;for(let e=0;e<u;e++){i[e]=-1;const l=d+e;v.set(a[l],l)}let g=0;for(let e=d;e<=t;e++){const t=l[e],n=v.get(c[e]);void 0!==n?(g=g<n?n:1073741823,i[n-d]=e,p[n]=t):null!==t&&Q(t,true)}for(1024&s||1073741823!==g||B(i);u-- >0;){n=u+d;const l=f[n],t=i[u];p[n]=-1===t?O(e,l):H(e,p[n],l,s|(1073741823===g&&-2!==t?1024:0))}}for(;d>0;)p[--d]=H(e,l[d],f[d],s)}e.c=p},B=e=>{const l=e.length,t=new o(l),n=new o(l);let s,r,c,a,f=0,u=0;for(;-1===e[u];u++);for(n[0]=u++;u<l;u++)if(r=e[u],-1!==r)if(s=n[f],e[s]<r)t[u]=s,n[++f]=u;else{for(c=0,a=f;c<a;)s=c+a>>1,e[n[s]]<r?c=s+1:a=s;r<e[n[c]]&&(c>0&&(t[u]=n[c-1]),n[c]=u)}for(s=n[f];f-- >=0;)e[s]=-2,s=t[s]},D=e=>()=>("string"===typeof e&&(i.innerHTML=e,e=p.firstChild),g.call(e,true)),G=(e,t,n,s,r)=>({f:1,p1:{f:t,p:n,c:s,s:r,d:l},p2:e}),R=(e,l)=>({d:e,p:l}),_={f:4,p1:null,p2:null},z=(e,l,t)=>({d:_,p:{k:e.map(l),v:e.map(t)}}),J=(e,l)=>{for(;768&(l|e.f);){const t=k,{p:n,n:s}=t;if(e.f=32,null!==e.c){const t=e.v.p;k.p=t.p,k.n=t.n,P(e.c,l),l=0,S()}t.p=n,t.n=s}},K=(e,l,t)=>{const n=k,{p:s,n:r}=n,o=e.v.p;n.p=o.p,n.n=o.n,e.f=32,e.c=H(e,e.c,l,t),S(),n.p=s,n.n=r,J(e,0)},U=(e=>{var l={f:32,p1:e,p2:null};return(e,t=null,n)=>A(32,{d:l,p:{p:e,n:t}},null,null,n)})((e=>{c((()=>{J(e,0)}))})),W=(e,l,t)=>{K(e,l,true===t?512:0)},X=(e=.016666666666666666)=>({type:"ema",alpha:e,avg:NaN,std:0,var:0,min:0}),Y=Number.isNaN,Z=Math.sqrt,$=(e,l)=>{if(Y(e.avg))return e.avg=l,void(e.min=l);var t=e.alpha,n=1-t;e.var=n*(e.var+t*(l-e.avg)**2),e.avg=n*e.avg+t*l,e.std=Z(e.var),l<e.min&&(e.min=l)};let ee=.5,le=50;function te(){const e=location.hash.substring(1).split(",");for(const l of e){const[e,t]=l.split("=");if("m"===e){const e=Number.parseFloat(t);isNaN(e)||(ee=e)}else if("n"===e){const e=Number.parseInt(t,10);e>0&&(le=e)}}}addEventListener("hashchange",te),te();const ne=Math.random,se=Math.floor,re=()=>{const e=15*ne();let l;return l=ne()<.1?"vacuum":ne()<.2?"<IDLE> in transaction":"SELECT blah FROM something",{elapsed:e,query:l}};function oe(){const e=[],l=se(10*ne()+1);for(let t=0;t<l;t++)e.push(re());return e}const ce={elapsed:0,query:"***"},ae=(e,l)=>e.elapsed-l.elapsed,fe=e=>{const l=e.slice(0,5);for(l.sort(ae);l.length<5;)l.push(ce);return l};let ue=0;const ie=(e,l)=>{void 0===l&&(l=ue++);const t=oe();return{id:l,name:e,queries:t,topFive:fe(t)}};function pe(e){const l=[];for(let t=0;t<e;t++)l.push(ie("cluster"+(t+1))),l.push(ie("cluster"+(t+1)+" slave"));return l}const de=(e,l)=>{for(let t=0;t<e.length;t++)if(Math.random()<l){const{id:l,name:n}=e[t];e[t]=ie(n,l)}},ve=e=>{if(0===e)return"";if(e>60){const l=(e%60).toFixed(2).split(".");return se(e/60)+":"+l[0].padStart(2,"0")+"."+l[1]}return e.toFixed(2)},ge=e=>e>=10?"Query elapsed warn_long":e>=1?"Query elapsed warn":e>0?"Query elapsed short":"",he=e=>e>=20?"label label-important":e>=10?"label label-warning":"label label-success",me=G(D('<td><div class="popover left"><div class="popover-content"></div><div class="arrow"></div></div></td>'),67,[1,1024,529],[5,4],[15,1]),be=({elapsed:e,query:l})=>R(me,[ge(e),ve(e),l]),ye=G(D('<tr><td class="dbname"></td><td class="query-count"><span></span></td></tr>'),323,[512,513,1024,9,529],[28,24,20,16,12],[1,10,1]),we=e=>{const l=e.topFive,t=e.queries.length;return R(ye,[e.name,he(t),t,be(l[0]),be(l[1]),be(l[2]),be(l[3]),be(l[4])])},Ne=e=>e.id,Ee=G(D('<table class="table table-striped latest-data"><tbody></tbody></table>'),66,e,[7,0],[1]),qe=e=>R(Ee,[z(e,Ne,we)]),Me=pe(le),Le=U(document.getElementById("app"),null);W(Le,qe(Me));const Ce=X(),Fe=X(),ke=document.querySelector("perf-monitor");ke.observe("data update",Ce),ke.observe("view update",Fe);const Ae=performance,Se=()=>{let e=Ae.now();de(Me,ee),$(Ce,Ae.now()-e),e=Ae.now(),W(Le,qe(Me)),$(Fe,Ae.now()-e),requestAnimationFrame(Se)};Se();
