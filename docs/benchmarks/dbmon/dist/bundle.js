const e=[],t=Object,l=Array,n=l.isArray,r=Map,s=Int32Array,o=queueMicrotask,c=Node.prototype,a=Element.prototype,i=document,f=i.createElement("template"),u=f.content;i.createElement("template").content.firstChild;const p=c.insertBefore,d=c.removeChild,v=c.cloneNode,h=a.setAttribute,g=a.removeAttribute,m=a.addEventListener,b=a.removeEventListener,y=(e,l)=>t.getOwnPropertyDescriptor(e,l),w=y(c,"firstChild").get;y(c,"lastChild").get;const N=y(c,"nextSibling").get;y(c,"previousSibling").get;const E=y(c,"textContent").set,q=y(a,"innerHTML").set,M=y(a,"className").set,L=y(HTMLElement.prototype,"style").get,C=y(SVGElement.prototype,"style").get,F=t.seal({p:null,n:null,si:0,e:[]}),k=(e,t,l,n,r)=>({f:e,v:t,c:l,p:n,s1:r}),A=()=>{const e=F.e;if(e.length>0){F.e=[];for(let t=0;t<e.length;t++)e[t]()}},S=(e,t,l,n,r,s,o)=>{for(let c=0;c<t.length;c++){let a;const i=t[c],f=7&i,u=i>>9;if(0===f)e=n[u],a=void 0;else{const t=i>>3&63,n=s[t];let c;if(null!==r&&(c=r[t]),c!==n||4===f)if(1===f)if(0===u)""===n&&void 0===c||M.call(e,n);else if(1===u)if(void 0===c)E.call(e,n);else{const t=w.call(e);null!==t?t.nodeValue=n:E.call(e,n)}else q.call(e,n);else if(7===f)n(e);else{const t=l[u];2===f?void 0!==n?h.call(e,t,n):g.call(e,t):3===f?e[t]=n:4===f?void 0!==c&&e[t]===n||(e[t]=n):5===f?(void 0===a&&(a=false===o?L.call(e):C.call(e)),a.setProperty(t,n)):(void 0!==c&&b.call(e,t,c),m.call(e,t,n))}}}},x=(e,t,l,n,r)=>{const s=F;for(;;){const o=t[l++];if(1&o&&(r[++s.si]=e),2&o){const n=o>>3;if(n)x(w.call(e),t,l,l+=n,r);else{const t=e;r[++s.si]=e=N.call(e),t.remove()}}if(l===n)return;e=N.call(e)}},T=(e,t,n,r)=>{let s=n.length;const o=l(s),c=k(t,r,o,e,null);for(;s>0;)o[--s]=H(c,n[s]);return c},I=(e,t,r,s)=>{if(!n(r))return Q(t,true),H(e,r);const o=t.c;let c=o,a=o.length,i=r.length;if(i!==a){for(t.c=c=l(i);a>i;){const e=o[--a];null!==e&&Q(e,true)}for(;i>a;)c[--i]=H(t,r[i])}for(;i>0;)c[--i]=j(t,o[i],r[i],s);return t},j=(e,t,l,n)=>{if(null===t)return H(e,l);if(false===l||null==l)return Q(t,true),null;const r=t.c,s=t.v,o=t.s1,c=t.f,a=127&c;if(t.f=a,t.v=l,16===a)return"object"!==typeof l?(s!==l&&(o.nodeValue=l),1024&n&&p.call(F.p,o,F.n),t):(d.call(F.p,o),H(e,l));if(s===l)return O(t,n),t;if(t.f=a,8===a)return I(e,t,l,n);const i=l.d,f=l.p,u=s.p;if(s.d!==i)return Q(t,true),H(e,l);if(2===a)640&(c|n)||void 0===i.p2||true!==i.p2(u,f)?t.c=j(t,r,o(f),n):null!==r&&O(r,n);else if(1===a){const e=F,l=e.p,s=i.p1,c=s.f,a=s.d,d=s.p,v=s.c,h=o[0];if(1024&n&&(n^=1024,p.call(l,h,e.n)),S(h,d,a,o,u,f,!!(4096&c)),null!==r){e.p=h,e.n=null;let s=0;for(let l=0;l<v.length;l++){const c=v[l],a=3&c,i=c>>2;0===a?r[s]=j(t,r[s++],f[i],n):1===a?e.n=o[i]:(e.p=o[i],e.n=null)}e.p=l}e.n=h}else 4===a?V(t,u,f,n):(u.v!==f.v&&(n|=512),t.c=j(t,r,f.c,n));return t},H=(e,t)=>{if(false!==t&&null!=t){if("object"===typeof t){if(n(t))return T(e,8,t,t);{const n=t.d,r=t.p,s=n.p1,o=7&n.f;if(1===o){const o=F,c=o.p,a=o.n,i=s,f=i.d,u=i.p,d=i.s,v=i.c,h=i.f,g=n.p2(),m=l(63&h);m[0]=g,d.length>0&&(o.si=0,x(w.call(g),d,0,d.length,m)),S(g,u,f,m,null,r,!!(4096&h));const b=k(1,t,null,e,m);if(v.length>0){const e=l(h>>6&63);b.c=e,o.p=g,o.n=null;let t=0;for(let l=0;l<v.length;l++){const n=v[l],s=3&n,c=n>>2;0===s?e[t++]=H(b,r[c]):1===s?o.n=m[c]:(o.p=m[c],o.n=null)}o.p=c}return o.n=g,p.call(c,g,a),b}if(2===o){const l={f:2,v:t,c:null,p:e,s1:null,s2:null},n=s(l);return l.c=H(l,n(r)),l.s1=n,l}if(4===o)return T(e,4,r.v,t);const c=k(64,t,null,e,null);return c.c=H(c,r.c),c}}{const l=F,n=l.n,r=i.createTextNode(t);return l.n=r,p.call(l.p,r,n),k(16,t,null,e,r)}}return null},O=(e,t)=>{const l=F,n=e.s1,r=e.v,s=e.c,o=e.f,c=127&o;if(e.f=c,1===c){const e=n[0];if(1024&t&&(t^=1024,p.call(l.p,e,l.n)),256&o){l.p=e,l.n=null;const o=l.p,c=r.d.p1.c;let a=0;for(let e=0;e<c.length;e++){const r=c[e],o=3&r,i=r>>2;if(0===o){const e=s[a++];null!==e&&O(e,t)}else 1===o?l.n=n[i]:(l.p=n[i],l.n=null)}l.p=o}l.n=e}else if(16===c)1024&t&&p.call(l.p,n,l.n),l.n=n;else if(2===c)640&(o|t)?e.c=j(e,s,n(r.p),t):null!==s&&O(s,t);else if(64===c)null!==s&&O(s,t);else{let e=s.length;for(;--e>=0;){const l=s[e];null!==l&&O(l,t)}}},Q=(e,t)=>{const l=e.f,r=e.c;if(true===t&&17&l&&(t=false,d.call(F.p,1&l?e.s1[0]:e.s1)),2&l){const t=e.s2;if(null!==t)if("function"===typeof t)t();else for(let e=0;e<t.length;e++)t[e]()}if(null!==r)if(n(r))for(let e=0;e<r.length;e++){const l=r[e];null!==l&&Q(l,t)}else Q(r,t)},V=(e,t,n,o)=>{const c=t.k,a=n.k,i=n.v;let f=a.length,u=c.length;const p=l(f);if(0===f)u>0&&Q(e,true);else if(0===u)for(;f>0;)p[--f]=H(e,i[f]);else{const t=e.c;let l=u-1,n=f-1,d=0;e:for(;;){for(;c[l]===a[n];)if(p[n]=j(e,t[l--],i[n],o),d>--n||d>l)break e;for(;c[d]===a[d]&&++d<=l&&d<=n;);break}if(d>l)for(;n>=d;)p[n]=H(e,i[n--]);else if(d>n){f=d;do{const e=t[f++];null!==e&&Q(e,true)}while(f<=l)}else{let f=n-d+1;const u=new s(f),v=new r;for(let e=0;e<f;e++){u[e]=-1;const t=d+e;v.set(a[t],t)}let h=0;for(let e=d;e<=l;e++){const l=t[e],n=v.get(c[e]);void 0!==n?(h=h<n?n:1073741823,u[n-d]=e,p[n]=l):null!==l&&Q(l,true)}for(1024&o||1073741823!==h||B(u);f-- >0;){n=f+d;const t=i[n],l=u[f];p[n]=-1===l?H(e,t):j(e,p[n],t,o|(1073741823===h&&-2!==l?1024:0))}}for(;d>0;)p[--d]=j(e,t[d],i[d],o)}e.c=p},B=e=>{const t=e.length,l=new s(t),n=new s(t);let r,o,c,a,i=0,f=0;for(;-1===e[f];f++);for(n[0]=f++;f<t;f++)if(o=e[f],-1!==o)if(r=n[i],e[r]<o)l[f]=r,n[++i]=f;else{for(c=0,a=i;c<a;)r=c+a>>1,e[n[r]]<o?c=r+1:a=r;o<e[n[c]]&&(c>0&&(l[f]=n[c-1]),n[c]=f)}for(r=n[i];i-- >=0;)e[r]=-2,r=l[r]},D=e=>()=>("string"===typeof e&&(f.innerHTML=e,e=u.firstChild),v.call(e,true)),P=(e,t,l,n,r,s)=>({f:1,p1:{f:t,p:l,c:n,s:r,d:s},p2:e}),G=(e,t)=>({d:e,p:t}),R={f:4,p1:null,p2:null},_=(e,t,l)=>({d:R,p:{k:e.map(t),v:e.map(l)}}),z=(e,t)=>{for(;768&(t|e.f);){const l=F,{p:n,n:r}=l;if(e.f=32,null!==e.c){const l=e.v.p;F.p=l.p,F.n=l.n,O(e.c,t),t=0,A()}l.p=n,l.n=r}},J=(e,t,l)=>{const n=F,{p:r,n:s}=n,o=e.v.p;n.p=o.p,n.n=o.n,e.f=32,e.c=j(e,e.c,t,l),A(),n.p=r,n.n=s,z(e,0)},K=(e=>{var t={f:32,p1:e,p2:null};return(e,l=null,n)=>k(32,{d:t,p:{p:e,n:l}},null,null,n)})((e=>{o((()=>{z(e,0)}))})),U=(e,t,l)=>{J(e,t,true===l?512:0)},W=(e=.016666666666666666)=>({type:"ema",alpha:e,avg:NaN,std:0,var:0,min:0}),X=Number.isNaN,Y=Math.sqrt,Z=(e,t)=>{if(X(e.avg))return e.avg=t,void(e.min=t);var l=e.alpha,n=1-l;e.var=n*(e.var+l*(t-e.avg)**2),e.avg=n*e.avg+l*t,e.std=Y(e.var),t<e.min&&(e.min=t)};let $=.5,ee=50;function te(){const e=location.hash.substring(1).split(",");for(const t of e){const[e,l]=t.split("=");if("m"===e){const e=Number.parseFloat(l);isNaN(e)||($=e)}else if("n"===e){const e=Number.parseInt(l,10);e>0&&(ee=e)}}}addEventListener("hashchange",te),te();const le=Math.random,ne=Math.floor,re=()=>{const e=15*le();let t;return t=le()<.1?"vacuum":le()<.2?"<IDLE> in transaction":"SELECT blah FROM something",{elapsed:e,query:t}};function se(){const e=[],t=ne(10*le()+1);for(let l=0;l<t;l++)e.push(re());return e}const oe={elapsed:0,query:"***"},ce=(e,t)=>e.elapsed-t.elapsed,ae=e=>{const t=e.slice(0,5);for(t.sort(ce);t.length<5;)t.push(oe);return t};let ie=0;const fe=(e,t)=>{void 0===t&&(t=ie++);const l=se();return{id:t,name:e,queries:l,topFive:ae(l)}};function ue(e){const t=[];for(let l=0;l<e;l++)t.push(fe("cluster"+(l+1))),t.push(fe("cluster"+(l+1)+" slave"));return t}const pe=(e,t)=>{for(let l=0;l<e.length;l++)if(Math.random()<t){const{id:t,name:n}=e[l];e[l]=fe(n,t)}},de=e=>{if(0===e)return"";if(e>60){const t=(e%60).toFixed(2).split(".");return ne(e/60)+":"+t[0].padStart(2,"0")+"."+t[1]}return e.toFixed(2)},ve=e=>e>=10?"Query elapsed warn_long":e>=1?"Query elapsed warn":e>0?"Query elapsed short":"",he=e=>e>=20?"label label-important":e>=10?"label label-warning":"label label-success",ge=P(D('<td><div class="popover left"><div class="popover-content"></div><div class="arrow"></div></div></td>'),67,[1,1024,529],[5,4],[15,1],e),me=({elapsed:e,query:t})=>G(ge,[ve(e),de(e),t]),be=P(D('<tr><td class="dbname"></td><td class="query-count"><span></span></td></tr>'),323,[512,513,1024,9,529],[28,24,20,16,12],[1,10,1],e),ye=e=>{const t=e.topFive,l=e.queries.length;return G(be,[e.name,he(l),l,me(t[0]),me(t[1]),me(t[2]),me(t[3]),me(t[4])])},we=e=>e.id,Ne=P(D('<table class="table table-striped latest-data"><tbody></tbody></table>'),66,[],[7,0],[1],e),Ee=e=>G(Ne,[_(e,we,ye)]),qe=ue(ee),Me=K(document.getElementById("app"),null);U(Me,Ee(qe));const Le=W(),Ce=W(),Fe=document.querySelector("perf-monitor");Fe.observe("data update",Le),Fe.observe("view update",Ce);const ke=performance,Ae=()=>{let e=ke.now();pe(qe,$),Z(Le,ke.now()-e),e=ke.now(),U(Me,Ee(qe)),Z(Ce,ke.now()-e),requestAnimationFrame(Ae)};Ae();
