const e=[],t=Object,l=Array,n=l.isArray,r=Map,o=Int32Array,s=Node.prototype,c=Element.prototype,a=document,i=a.createElement("template"),f=i.content;a.createElement("template").content.firstChild;const u=s.insertBefore,p=s.removeChild,d=s.cloneNode,v=c.setAttribute,h=c.removeAttribute,g=c.addEventListener,m=c.removeEventListener,b=(e,l)=>t.getOwnPropertyDescriptor(e,l),y=b(s,"firstChild").get,w=b(s,"nextSibling").get,N=b(s,"textContent").set,E=b(c,"className").set,q=b(HTMLElement.prototype,"style").get,M=b(SVGElement.prototype,"style").get,F=t.seal({p:null,n:null,si:0,e:[]}),L=(e,t,l,n,r)=>({f:e,v:t,c:l,s:n,p:r}),k=()=>{const e=F.e;if(e.length>0){F.e=[];for(let t=0;t<e.length;t++)e[t]()}},A=(e,t,l,n,r,o,s)=>{for(let c=0;c<t.length;c++){let a;const i=t[c],f=7&i,u=i>>9;if(0===f)e=n[u],a=void 0;else{const t=i>>3&63,n=o[t];let c;if(null!==r&&(c=r[t]),c!==n||4===f)if(1===f)0===u?""===n&&void 0===c||E.call(e,n):void 0===c?N.call(e,n):y.call(e).nodeValue=n;else if(7===f)n(e);else{const t=l[u];2===f?void 0!==n?v.call(e,t,n):h.call(e,t):3===f?e[t]=n:4===f?e[t]!==n&&(e[t]=n):5===f?(void 0===a&&(a=false===s?q.call(e):M.call(e)),a.setProperty(t,n)):(void 0!==c&&m.call(e,t,c),g.call(e,t,n))}}}},C=(e,t,l,n,r)=>{const o=F;for(;;){const s=t[l++];if(1&s&&(r[++o.si]=e),2&s){const n=s>>2;if(n)C(y.call(e),t,l,l+=n,r);else{const t=e;r[++o.si]=e=w.call(e),t.remove()}}if(l===n)return;e=w.call(e)}},x=(e,t,n,r)=>{let o=n.length;const s=l(o),c=L(t,r,s,null,e);for(;o>0;)s[--o]=T(c,n[o]);return c},S=(e,t,r,o)=>{if(!n(r))return O(t,true),T(e,r);t.f=8;const s=t.c;let c=s,a=s.length,i=r.length;if(i!==a){for(t.c=c=l(i);a>i;){const e=s[--a];null!==e&&O(e,true)}for(;i>a;)c[--i]=T(t,r[i])}for(;i>0;)c[--i]=I(t,s[i],r[i],o);return t},I=(e,t,l,n)=>{if(null===t)return T(e,l);if(false===l||null==l)return O(t,true),null;const r=t.f,o=63&r;if(16===o){const r=F,o=t.s;if("object"!==typeof l){const e=t.v;return t.v=l,e!==l&&(o.nodeValue=l),512&n&&u.call(r.p,o,r.n),t}return p.call(r.p,o),T(e,l)}const s=t.v;if(t.v=l,s===l)return j(t,n),t;if(8===o)return S(e,t,l,n);const c=l.d;if(s.d!==c)return O(t,true),T(e,l);const a=s.p,i=l.p;if(t.f=o,2===o){const e=t.c;320&(r|n)||void 0===c.p2||true!==c.p2(a,i)?t.c=I(t,e,t.s.r(i),n):null!==e&&j(e,n)}else if(1===o){const e=F,l=e.p,r=t.c,o=t.s,s=c.p1,f=o[0],p=s.c;if(512&n&&(n^=512,u.call(l,f,e.n)),A(f,s.p,s.d,o,a,i,4096===(4096&s.f)),null!==r){e.p=f,e.n=null;let s=0;for(let l=0;l<p.length;l++){const c=p[l],a=3&c,f=c>>2;0===a?r[s]=I(t,r[s++],i[f],n):1===a?e.n=o[f]:(e.p=o[f],e.n=null)}e.p=l}e.n=f}else Q(t,a,i,n);return t},T=(e,t)=>{if(false!==t&&null!=t){if("object"===typeof t){if(n(t))return x(e,8,t,t);{const n=t.d,r=t.p,o=3&n.f;if(1===o){const o=F,s=n.p1,c=n.p2(),a=s.s,i=s.f,f=l(63&i);f[0]=c,a.length>0&&(o.si=0,C(y.call(c),a,0,a.length,f)),A(c,s.p,s.d,f,null,r,4096===(4096&s.f));const p=o.p,d=o.n,v=L(1,t,null,f,e),h=i>>6&63;if(h>0){const e=s.c,t=l(h);v.c=t,o.p=c,o.n=null;let n=0;for(let l=0;l<e.length;l++){const s=e[l],c=3&s,a=s>>2;0===c?t[n++]=T(v,r[a]):1===c?o.n=f[a]:(o.p=f[a],o.n=null)}o.p=p}return o.n=c,u.call(p,c,d),v}if(2===o){const l={r:null,u:null},o=L(2,t,null,l,e),s=n.p1(o);return l.r=s,o.c=T(o,s(r)),o}return x(e,4,r.v,t)}}{const l=F,n=a.createTextNode(t);return u.call(l.p,n,l.n),l.n=n,L(16,t,null,n,e)}}return null},j=(e,t)=>{const l=F,n=e.c,r=e.f;if(e.f&=63,1&r){const o=e.s[0];if(512&t&&(t^=512,u.call(l.p,o,l.n)),128&r){l.p=o,l.n=null;const r=l.p,s=e.s,c=e.v.d.p1.c;let a=0;for(let e=0;e<c.length;e++){const r=c[e],o=3&r,i=r>>2;if(0===o){const e=n[a++];null!==e&&j(e,t)}else 1===o?l.n=s[i]:(l.p=s[i],l.n=null)}l.p=r}l.n=o}else if(16&r)512&t&&u.call(l.p,e.s,l.n),l.n=e.s;else if(2&r)320&(r|t)?e.c=I(e,n,e.s.r(e.v.p),t):null!==n&&j(n,t);else{let e=n.length;for(;--e>=0;){const l=n[e];null!==l&&j(l,t)}}},O=(e,t)=>{const l=e.f;true===t&&17&l&&(t=false,p.call(F.p,1&l?e.s[0]:e.s));const r=e.c;if(null!==r)if(n(r))for(let e=0;e<r.length;e++){const l=r[e];null!==l&&O(l,t)}else O(r,t);if(2&l){const t=e.s.u;if(null!==t)if("function"===typeof t)t();else for(let e=0;e<t.length;e++)t[e]()}},Q=(e,t,n,s)=>{const c=t.k,a=n.k,i=n.v;let f=a.length,u=c.length;const p=l(f);if(0===f)u>0&&O(e,true);else if(0===u)for(;f>0;)p[--f]=T(e,i[f]);else{const t=e.c;let l=u-1,n=f-1,d=0,v=a[n];e:for(;;){for(;c[l]===v;){if(p[n]=I(e,t[l--],i[n],s),d>--n||d>l)break e;v=a[n]}for(;c[d]===a[d]&&++d<=l&&d<=n;);break}if(d>l)for(;n>=d;)p[n]=T(e,i[n--]);else if(d>n){f=d;do{const e=t[f++];null!==e&&O(e,true)}while(f<=l)}else{let f=n-d+1;const u=new o(f),v=new r;for(let e=0;e<f;e++){u[e]=-1;const t=d+e;v.set(a[t],t)}let h=0;for(let e=d;e<=l;e++){const l=t[e],n=v.get(c[e]);void 0!==n?(h=h<n?n:1073741823,u[n-d]=e,p[n]=l):null!==l&&O(l,true)}for(512&s||1073741823!==h||V(u);f-- >0;){n=f+d;const t=i[n],l=u[f];p[n]=-1===l?T(e,t):I(e,p[n],t,s|(1073741823===h&&-2!==l?512:0))}}for(;d>0;)p[--d]=I(e,t[d],i[d],s)}e.c=p},V=e=>{const t=e.length,l=new o(t),n=new o(t);let r,s,c,a,i=0,f=0;for(;-1===e[f];f++);for(n[0]=f++;f<t;f++)if(s=e[f],-1!==s)if(r=n[i],e[r]<s)l[f]=r,n[++i]=f;else{for(c=0,a=i;c<a;)r=c+a>>1,e[n[r]]<s?c=r+1:a=r;s<e[n[c]]&&(c>0&&(l[f]=n[c-1]),n[c]=f)}for(r=n[i];i-- >=0;)e[r]=-2,r=l[r]},B=e=>()=>("string"===typeof e&&(i.innerHTML=e,e=f.firstChild),d.call(e,true)),D=(e,t,l,n,r,o)=>({f:1,p1:{f:t,p:l,c:n,s:r,d:o},p2:e}),H=(e,t)=>({d:e,p:t}),P={f:4,p1:null,p2:null},G=(e,t,l)=>({d:P,p:{k:e.map(t),v:e.map(l)}}),R=(e,t)=>{for(;128&e.f;)if(e.f=32,null!==e.c){const l=e.v.p;F.p=l.p,F.n=l.n,j(e.c,t),t=0,k()}},_=(e,t,l)=>{const n=e.v.p;F.p=n.p,F.n=n.n,e.f=32,e.c=I(e,e.c,t,l),k(),R(e,0)},z=(e=.016666666666666666)=>({type:"ema",alpha:e,avg:NaN,std:0,var:0,min:0}),J=Number.isNaN,K=Math.sqrt,U=(e,t)=>{if(J(e.avg))return e.avg=t,void(e.min=t);var l=e.alpha,n=1-l;e.var=n*(e.var+l*(t-e.avg)**2),e.avg=n*e.avg+l*t,e.std=K(e.var),t<e.min&&(e.min=t)},W=queueMicrotask,X={f:32,p1:e=>{W((()=>{R(e,0)}))},p2:null},Y=(e,t=null)=>L(32,{d:X,p:{p:e,n:t}},null,null,null),Z=(e,t,l=false)=>{_(e,t,true===l?256:0)};let $=.5,ee=50;function te(){const e=location.hash.substring(1).split(",");for(const t of e){const[e,l]=t.split("=");if("m"===e){const e=Number.parseFloat(l);isNaN(e)||($=e)}else if("n"===e){const e=Number.parseInt(l,10);e>0&&(ee=e)}}}addEventListener("hashchange",te),te();const le=Math.random,ne=Math.floor,re=()=>{const e=15*le();let t;return t=le()<.1?"vacuum":le()<.2?"<IDLE> in transaction":"SELECT blah FROM something",{elapsed:e,query:t}};function oe(){const e=[],t=ne(10*le()+1);for(let l=0;l<t;l++)e.push(re());return e}const se={elapsed:0,query:"***"},ce=(e,t)=>e.elapsed-t.elapsed,ae=e=>{const t=e.slice(0,5);for(t.sort(ce);t.length<5;)t.push(se);return t};let ie=0;const fe=(e,t)=>{void 0===t&&(t=ie++);const l=oe();return{id:t,name:e,queries:l,topFive:ae(l)}};function ue(e){const t=[];for(let l=0;l<e;l++)t.push(fe("cluster"+(l+1))),t.push(fe("cluster"+(l+1)+" slave"));return t}const pe=(e,t)=>{for(let l=0;l<e.length;l++)if(Math.random()<t){const{id:t,name:n}=e[l];e[l]=fe(n,t)}},de=e=>{if(0===e)return"";if(e>60){const t=(e%60).toFixed(2).split(".");return ne(e/60)+":"+t[0].padStart(2,"0")+"."+t[1]}return e.toFixed(2)},ve=e=>e>=10?"Query elapsed warn_long":e>=1?"Query elapsed warn":e>0?"Query elapsed short":"",he=e=>e>=20?"label label-important":e>=10?"label label-warning":"label label-success",ge=D(B('<td><div class="popover left"><div class="popover-content"></div><div class="arrow"></div></div></td>'),67,[1,1024,529],[5,4],[7,1],e),me=({elapsed:e,query:t})=>H(ge,[ve(e),de(e),t]),be=D(B('<tr><td class="dbname"></td><td class="query-count"><span></span></td></tr>'),323,[512,513,1024,9,529],[28,24,20,16,12],[1,6,1],e),ye=e=>{const t=e.topFive,l=e.queries.length;return H(be,[e.name,he(l),l,me(t[0]),me(t[1]),me(t[2]),me(t[3]),me(t[4])])},we=e=>e.id,Ne=D(B('<table class="table table-striped latest-data"><tbody></tbody></table>'),66,[],[7,0],[1],e),Ee=e=>H(Ne,[G(e,we,ye)]),qe=ue(ee),Me=Y(document.getElementById("app"),null);Z(Me,Ee(qe));const Fe=z(),Le=z(),ke=document.querySelector("perf-monitor");ke.observe("data update",Fe),ke.observe("view update",Le);const Ae=performance,Ce=()=>{let e=Ae.now();pe(qe,$),U(Fe,Ae.now()-e),e=Ae.now(),Z(Me,Ee(qe)),U(Le,Ae.now()-e),requestAnimationFrame(Ce)};Ce();
